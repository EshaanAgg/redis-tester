Debug = true

[33m[stage-1] [0m[94mRunning tests for Stage #1: init[0m
[33m[stage-1] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-1] [0m[94mConnecting to port 6379...[0m
[33m[stage-1] [0m[36mConnection successful[0m
[33m[stage-1] [0m[92mTest passed.[0m
[33m[stage-1] [0m[36mTerminating program[0m
[33m[stage-1] [0m[36mProgram terminated successfully[0m

[33m[stage-2] [0m[94mRunning tests for Stage #2: ping-pong[0m
[33m[stage-2] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-2] [0m[36mConnection established, sending ping command...[0m
[33m[stage-2] [0m[94m$ redis-cli PING[0m
[33m[stage-2] [0m[36mSent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-2] [0m[36mReceived bytes: "+PONG\r\n"[0m
[33m[stage-2] [0m[36mReceived RESP value: "PONG"[0m
[33m[stage-2] [0m[92mReceived "PONG"[0m
[33m[stage-2] [0m[92mTest passed.[0m
[33m[stage-2] [0m[36mTerminating program[0m
[33m[stage-2] [0m[36mProgram terminated successfully[0m

[33m[stage-3] [0m[94mRunning tests for Stage #3: ping-pong-multiple[0m
[33m[stage-3] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-3] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-3] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-3] [0m[92mReceived "PONG"[0m
[33m[stage-3] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-3] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-3] [0m[92mReceived "PONG"[0m
[33m[stage-3] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-3] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-3] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-3] [0m[92mReceived "PONG"[0m
[33m[stage-3] [0m[36mSuccess, closing connection...[0m
[33m[stage-3] [0m[92mTest passed.[0m
[33m[stage-3] [0m[36mTerminating program[0m
[33m[stage-3] [0m[36mProgram terminated successfully[0m

[33m[stage-4] [0m[94mRunning tests for Stage #4: concurrent-clients[0m
[33m[stage-4] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-4] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[94mclient-2: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-2: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-2: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-2: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[94mclient-1: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-1: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[94mclient-2: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-2: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-2: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-2: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[36mclient-1: Success, closing connection...[0m
[33m[stage-4] [0m[94mclient-3: $ redis-cli PING[0m
[33m[stage-4] [0m[36mclient-3: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-4] [0m[36mclient-3: Received bytes: "+PONG\r\n"[0m
[33m[stage-4] [0m[36mclient-3: Received RESP value: "PONG"[0m
[33m[stage-4] [0m[92mReceived "PONG"[0m
[33m[stage-4] [0m[36mclient-2: Success, closing connection...[0m
[33m[stage-4] [0m[36mclient-3: Success, closing connection...[0m
[33m[stage-4] [0m[92mTest passed.[0m
[33m[stage-4] [0m[36mTerminating program[0m
[33m[stage-4] [0m[36mProgram terminated successfully[0m

[33m[stage-5] [0m[94mRunning tests for Stage #5: echo[0m
[33m[stage-5] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-5] [0m[94m$ redis-cli ECHO pear[0m
[33m[stage-5] [0m[36mSent bytes: "*2\r\n$4\r\nECHO\r\n$4\r\npear\r\n"[0m
[33m[stage-5] [0m[36mReceived bytes: "$4\r\npear\r\n"[0m
[33m[stage-5] [0m[36mReceived RESP value: "pear"[0m
[33m[stage-5] [0m[92mReceived "pear"[0m
[33m[stage-5] [0m[92mTest passed.[0m
[33m[stage-5] [0m[36mTerminating program[0m
[33m[stage-5] [0m[36mProgram terminated successfully[0m

[33m[stage-6] [0m[94mRunning tests for Stage #6: set_get[0m
[33m[stage-6] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-6] [0m[36mSetting key orange to pear[0m
[33m[stage-6] [0m[94m$ redis-cli SET orange pear[0m
[33m[stage-6] [0m[36mSent bytes: "*3\r\n$3\r\nSET\r\n$6\r\norange\r\n$4\r\npear\r\n"[0m
[33m[stage-6] [0m[36mReceived bytes: "+OK\r\n"[0m
[33m[stage-6] [0m[36mReceived RESP value: "OK"[0m
[33m[stage-6] [0m[92mReceived "OK"[0m
[33m[stage-6] [0m[36mGetting key orange[0m
[33m[stage-6] [0m[94m$ redis-cli GET orange[0m
[33m[stage-6] [0m[36mSent bytes: "*2\r\n$3\r\nGET\r\n$6\r\norange\r\n"[0m
[33m[stage-6] [0m[36mReceived bytes: "$4\r\npear\r\n"[0m
[33m[stage-6] [0m[36mReceived RESP value: "pear"[0m
[33m[stage-6] [0m[92mReceived "pear"[0m
[33m[stage-6] [0m[92mTest passed.[0m
[33m[stage-6] [0m[36mTerminating program[0m
[33m[stage-6] [0m[36mProgram terminated successfully[0m

[33m[stage-7] [0m[94mRunning tests for Stage #7: expiry[0m
[33m[stage-7] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-7] [0m[94m$ redis-cli SET pineapple grape px 100[0m
[33m[stage-7] [0m[36mSent bytes: "*5\r\n$3\r\nSET\r\n$9\r\npineapple\r\n$5\r\ngrape\r\n$2\r\npx\r\n$3\r\n100\r\n"[0m
[33m[stage-7] [0m[36mReceived bytes: "+OK\r\n"[0m
[33m[stage-7] [0m[36mReceived RESP value: "OK"[0m
[33m[stage-7] [0m[92mReceived "OK"[0m
[33m[stage-7] [0m[92mReceived OK at 22:25:05.446[0m
[33m[stage-7] [0m[94mFetching key "pineapple" at 22:25:05.446 (should not be expired)[0m
[33m[stage-7] [0m[94m$ redis-cli GET pineapple[0m
[33m[stage-7] [0m[36mSent bytes: "*2\r\n$3\r\nGET\r\n$9\r\npineapple\r\n"[0m
[33m[stage-7] [0m[36mReceived bytes: "$5\r\ngrape\r\n"[0m
[33m[stage-7] [0m[36mReceived RESP value: "grape"[0m
[33m[stage-7] [0m[92mReceived "grape"[0m
[33m[stage-7] [0m[36mSleeping for 101ms[0m
[33m[stage-7] [0m[94mFetching key "pineapple" at 22:25:05.549 (should be expired)[0m
[33m[stage-7] [0m[94m$ redis-cli GET pineapple[0m
[33m[stage-7] [0m[36mSent bytes: "*2\r\n$3\r\nGET\r\n$9\r\npineapple\r\n"[0m
[33m[stage-7] [0m[36mReceived bytes: "$-1\r\n"[0m
[33m[stage-7] [0m[36mReceived RESP value: NIL[0m
[33m[stage-7] [0m[92mReceived NIL[0m
[33m[stage-7] [0m[92mTest passed.[0m
[33m[stage-7] [0m[36mTerminating program[0m
[33m[stage-7] [0m[36mProgram terminated successfully[0m

[33m[stage-8] [0m[94mRunning tests for Stage #8: rdb-config[0m
[33m[stage-8] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles3740050041 --dbfilename banana.rdb[0m
[33m[stage-8] [0m[94m$ redis-cli CONFIG get dir[0m
[33m[stage-8] [0m[36mSent bytes: "*3\r\n$6\r\nCONFIG\r\n$3\r\nget\r\n$3\r\ndir\r\n"[0m
[33m[stage-8] [0m[36mReceived bytes: "*2\r\n$3\r\ndir\r\n$75\r\n/private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles3740050041\r\n"[0m
[33m[stage-8] [0m[36mReceived RESP value: ["dir", "/private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles3740050041"][0m
[33m[stage-8] [0m[92mReceived ["dir", "/private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles3740050041"][0m
[33m[stage-8] [0m[92mTest passed.[0m
[33m[stage-8] [0m[36mTerminating program[0m
[33m[stage-8] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-9] [0m[94mRunning tests for Stage #9: rdb-read-key[0m
[33m[stage-9] [0m[94mCreated RDB file with single key: "orange"[0m
[33m[stage-9] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles2692303034 --dbfilename pineapple.rdb[0m
[33m[stage-9] [0m[94m$ redis-cli KEYS *[0m
[33m[stage-9] [0m[92mTest passed.[0m
[33m[stage-9] [0m[36mTerminating program[0m
[33m[stage-9] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-10] [0m[94mRunning tests for Stage #10: rdb-read-string-value[0m
[33m[stage-10] [0m[94mCreated RDB file with single key-value pair: blueberry="orange"[0m
[33m[stage-10] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles4052023639 --dbfilename pear.rdb[0m
[33m[stage-10] [0m[94m$ redis-cli GET blueberry[0m
[33m[stage-10] [0m[92mTest passed.[0m
[33m[stage-10] [0m[36mTerminating program[0m
[33m[stage-10] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-11] [0m[94mRunning tests for Stage #11: rdb-read-multiple-keys[0m
[33m[stage-11] [0m[94mCreated RDB file with 4 keys: ["grape" "pear" "strawberry" "banana"][0m
[33m[stage-11] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles4017654937 --dbfilename pineapple.rdb[0m
[33m[stage-11] [0m[94m$ redis-cli KEYS *[0m
[33m[stage-11] [0m[92mTest passed.[0m
[33m[stage-11] [0m[36mTerminating program[0m
[33m[stage-11] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-12] [0m[94mRunning tests for Stage #12: rdb-read-multiple-string-values[0m
[33m[stage-12] [0m[94mCreated RDB file with key-value pairs: "grape"="raspberry", "pineapple"="mango", "mango"="blueberry"[0m
[33m[stage-12] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles3048498214 --dbfilename pineapple.rdb[0m
[33m[stage-12] [0m[94m$ redis-cli GET grape[0m
[33m[stage-12] [0m[94m$ redis-cli GET pineapple[0m
[33m[stage-12] [0m[94m$ redis-cli GET mango[0m
[33m[stage-12] [0m[92mTest passed.[0m
[33m[stage-12] [0m[36mTerminating program[0m
[33m[stage-12] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-13] [0m[94mRunning tests for Stage #13: rdb-read-value-with-expiry[0m
[33m[stage-13] [0m[94m$ ./spawn_redis_server.sh --dir /private/var/folders/5l/z5y3dkwn68sgb6htzc5w7vnm0000gn/T/rdbfiles2418595208 --dbfilename banana.rdb[0m
[33m[stage-13] [0m[94m$ redis-cli GET strawberry[0m
[33m[stage-13] [0m[94m$ redis-cli GET pear[0m
[33m[stage-13] [0m[94m$ redis-cli GET raspberry[0m
[33m[stage-13] [0m[94m$ redis-cli GET banana[0m
[33m[stage-13] [0m[92mTest passed.[0m
[33m[stage-13] [0m[36mTerminating program[0m
[33m[stage-13] [0m[36mError terminating program: 'program failed to exit in 2 seconds after receiving sigterm'[0m

[33m[stage-14] [0m[94mRunning tests for Stage #14: repl-custom-port[0m
[33m[stage-14] [0m[94m$ ./spawn_redis_server.sh --port 6389[0m
[33m[stage-14] [0m[94mConnecting to port 6389...[0m
[33m[stage-14] [0m[36mConnection successful[0m
[33m[stage-14] [0m[92mTest passed.[0m
[33m[stage-14] [0m[36mTerminating program[0m
[33m[stage-14] [0m[36mProgram terminated successfully[0m

[33m[stage-15] [0m[94mRunning tests for Stage #15: repl-info[0m
[33m[stage-15] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-15] [0m[94mclient: $ redis-cli INFO replication[0m
[33m[stage-15] [0m[36mclient: Sent bytes: "*2\r\n$4\r\nINFO\r\n$11\r\nreplication\r\n"[0m
[33m[stage-15] [0m[36mclient: Received bytes: "$349\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:e5f265ee326480a40656c9df7a73d7a78d2b14f9\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n"[0m
[33m[stage-15] [0m[36mclient: Received RESP value: "# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:e5f265ee326480a40656c9df7a73d7a78d2b14f9\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-15] [0m[92mReceived "# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:e5f265ee326480a40656c9df7a73d7a78d2b14f9\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-15] [0m[92mFound role:master in response.[0m
[33m[stage-15] [0m[92mTest passed.[0m
[33m[stage-15] [0m[36mTerminating program[0m
[33m[stage-15] [0m[36mProgram terminated successfully[0m

[33m[stage-16] [0m[94mRunning tests for Stage #16: repl-info-replica[0m
[33m[stage-16] [0m[94mMaster is running on port 6379[0m
[33m[stage-16] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-16] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-16] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-16] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-16] [0m[94mmaster: Sent "OK"[0m
[33m[stage-16] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-16] [0m[94mmaster: Sent "OK"[0m
[33m[stage-16] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-16] [0m[36mmaster: Received RESP value: ["PSYNC", "?", "-1"][0m
[33m[stage-16] [0m[94mmaster: Sent "FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0"[0m
[33m[stage-16] [0m[36mmaster: Sent bytes: "+FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0\r\n"[0m
[33m[stage-16] [0m[36mmaster: Sent bytes: "$88\r\nREDIS0011\xfa\tredis-ver\x057.2.0\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2m\b\xbce\xfa\bused-mem°\xc4\x10\x00\xfa\baof-base\xc0\x00\xff\xf0n;\xfe\xc0\xffZ\xa2"[0m
[33m[stage-16] [0m[94mclient: $ redis-cli INFO replication[0m
[33m[stage-16] [0m[36mclient: Sent bytes: "*2\r\n$4\r\nINFO\r\n$11\r\nreplication\r\n"[0m
[33m[stage-16] [0m[36mclient: Received bytes: "$613\r\n# Replication\r\nrole:slave\r\nmaster_host:localhost\r\nmaster_port:6379\r\nmaster_link_status:down\r\nmaster_last_io_seconds_ago:-1\r\nmaster_sync_in_progress:0\r\nslave_read_repl_offset:0\r\nslave_repl_offset:0\r\nmaster_link_down_since_seconds:0\r\nslave_priority:100\r\nslave_read_only:1\r\nreplica_announced:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:75cd7bc10c49047e0d163660f3b90625b1af31dc\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:1\r\nrepl_backlog_histlen:0\r\n\r\n"[0m
[33m[stage-16] [0m[36mclient: Received RESP value: "# Replication\r\nrole:slave\r\nmaster_host:localhost\r\nmaster_port:6379\r\nmaster_link_status:down\r\nmaster_last_io_seconds_ago:-1\r\nmaster_sync_in_progress:0\r\nslave_read_repl_offset:0\r\nslave_repl_offset:0\r\nmaster_link_down_since_seconds:0\r\nslave_priority:100\r\nslave_read_only:1\r\nreplica_announced:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:75cd7bc10c49047e0d163660f3b90625b1af31dc\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:1\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-16] [0m[92mReceived "# Replication\r\nrole:slave\r\nmaster_host:localhost\r\nmaster_port:6379\r\nmaster_link_status:down\r\nmaster_last_io_seconds_ago:-1\r\nmaster_sync_in_progress:0\r\nslave_read_repl_offset:0\r\nslave_repl_offset:0\r\nmaster_link_down_since_seconds:0\r\nslave_priority:100\r\nslave_read_only:1\r\nreplica_announced:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:75cd7bc10c49047e0d163660f3b90625b1af31dc\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:1\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-16] [0m[92mFound role:slave in response.[0m
[33m[stage-16] [0m[92mTest passed.[0m
[33m[stage-16] [0m[36mTerminating program[0m
[33m[stage-16] [0m[36mProgram terminated successfully[0m

[33m[stage-17] [0m[94mRunning tests for Stage #17: repl-id[0m
[33m[stage-17] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-17] [0m[94mclient: $ redis-cli INFO replication[0m
[33m[stage-17] [0m[36mclient: Sent bytes: "*2\r\n$4\r\nINFO\r\n$11\r\nreplication\r\n"[0m
[33m[stage-17] [0m[36mclient: Received bytes: "$349\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:33739851396ac7490f17dc60b35e0686061b8062\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n"[0m
[33m[stage-17] [0m[36mclient: Received RESP value: "# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:33739851396ac7490f17dc60b35e0686061b8062\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-17] [0m[92mReceived "# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:33739851396ac7490f17dc60b35e0686061b8062\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n"[0m
[33m[stage-17] [0m[92mFound master_replid:xxx in response.[0m
[33m[stage-17] [0m[92mFound master_reploffset:0 in response.[0m
[33m[stage-17] [0m[92mTest passed.[0m
[33m[stage-17] [0m[36mTerminating program[0m
[33m[stage-17] [0m[36mProgram terminated successfully[0m

[33m[stage-18] [0m[94mRunning tests for Stage #18: repl-replica-ping[0m
[33m[stage-18] [0m[94mMaster is running on port 6379.[0m
[33m[stage-18] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-18] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-18] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-18] [0m[92mReceived ["PING"][0m
[33m[stage-18] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-18] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-18] [0m[92mTest passed.[0m
[33m[stage-18] [0m[36mTerminating program[0m
[33m[stage-18] [0m[36mProgram terminated successfully[0m

[33m[stage-19] [0m[94mRunning tests for Stage #19: repl-replica-replconf[0m
[33m[stage-19] [0m[94mMaster is running on port 6379[0m
[33m[stage-19] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-19] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-19] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-19] [0m[92mReceived ["PING"][0m
[33m[stage-19] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-19] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-19] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-19] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-19] [0m[92mReceived ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-19] [0m[94mmaster: Sent "OK"[0m
[33m[stage-19] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-19] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-19] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-19] [0m[92mReceived ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-19] [0m[94mmaster: Sent "OK"[0m
[33m[stage-19] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-19] [0m[92mTest passed.[0m
[33m[stage-19] [0m[36mTerminating program[0m
[33m[stage-19] [0m[36mProgram terminated successfully[0m

[33m[stage-20] [0m[94mRunning tests for Stage #20: repl-replica-psync[0m
[33m[stage-20] [0m[94mMaster is running on port 6379[0m
[33m[stage-20] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-20] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-20] [0m[92mReceived ["PING"][0m
[33m[stage-20] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-20] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-20] [0m[92mReceived ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-20] [0m[94mmaster: Sent "OK"[0m
[33m[stage-20] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-20] [0m[92mReceived ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-20] [0m[94mmaster: Sent "OK"[0m
[33m[stage-20] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-20] [0m[36mmaster: Received RESP value: ["PSYNC", "?", "-1"][0m
[33m[stage-20] [0m[92mReceived ["PSYNC", "?", "-1"][0m
[33m[stage-20] [0m[94mmaster: Sent "FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0"[0m
[33m[stage-20] [0m[36mmaster: Sent bytes: "+FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0\r\n"[0m
[33m[stage-20] [0m[92mTest passed.[0m
[33m[stage-20] [0m[36mTerminating program[0m
[33m[stage-20] [0m[36mProgram terminated successfully[0m

[33m[stage-21] [0m[94mRunning tests for Stage #21: repl-master-replconf[0m
[33m[stage-21] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-21] [0m[94mclient: $ redis-cli PING[0m
[33m[stage-21] [0m[36mclient: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-21] [0m[36mclient: Received bytes: "+PONG\r\n"[0m
[33m[stage-21] [0m[36mclient: Received RESP value: "PONG"[0m
[33m[stage-21] [0m[92mReceived "PONG"[0m
[33m[stage-21] [0m[94mclient: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-21] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-21] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-21] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-21] [0m[92mReceived "OK"[0m
[33m[stage-21] [0m[94mclient: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-21] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-21] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-21] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-21] [0m[92mReceived "OK"[0m
[33m[stage-21] [0m[92mTest passed.[0m
[33m[stage-21] [0m[36mTerminating program[0m
[33m[stage-21] [0m[36mProgram terminated successfully[0m

[33m[stage-22] [0m[94mRunning tests for Stage #22: repl-master-psync[0m
[33m[stage-22] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-22] [0m[94mclient: $ redis-cli PING[0m
[33m[stage-22] [0m[36mclient: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-22] [0m[36mclient: Received bytes: "+PONG\r\n"[0m
[33m[stage-22] [0m[36mclient: Received RESP value: "PONG"[0m
[33m[stage-22] [0m[92mReceived "PONG"[0m
[33m[stage-22] [0m[94mclient: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-22] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-22] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-22] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-22] [0m[92mReceived "OK"[0m
[33m[stage-22] [0m[94mclient: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-22] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-22] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-22] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-22] [0m[92mReceived "OK"[0m
[33m[stage-22] [0m[94mclient: $ redis-cli PSYNC ? -1[0m
[33m[stage-22] [0m[36mclient: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-22] [0m[36mclient: Received bytes: "+FULLRESYNC 231b411c76d35afada1c37025007e614bce0e532 0\r\n"[0m
[33m[stage-22] [0m[36mclient: Received RESP value: "FULLRESYNC 231b411c76d35afada1c37025007e614bce0e532 0"[0m
[33m[stage-22] [0m[92mReceived "FULLRESYNC 231b411c76d35afada1c37025007e614bce0e532 0"[0m
[33m[stage-22] [0m[92mTest passed.[0m
[33m[stage-22] [0m[36mTerminating program[0m
[33m[stage-22] [0m[36mProgram terminated successfully[0m

[33m[stage-23] [0m[94mRunning tests for Stage #23: repl-master-psync-rdb[0m
[33m[stage-23] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-23] [0m[94mclient: $ redis-cli PING[0m
[33m[stage-23] [0m[36mclient: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-23] [0m[36mclient: Received bytes: "+PONG\r\n"[0m
[33m[stage-23] [0m[36mclient: Received RESP value: "PONG"[0m
[33m[stage-23] [0m[92mReceived "PONG"[0m
[33m[stage-23] [0m[94mclient: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-23] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-23] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-23] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-23] [0m[92mReceived "OK"[0m
[33m[stage-23] [0m[94mclient: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-23] [0m[36mclient: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-23] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-23] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-23] [0m[92mReceived "OK"[0m
[33m[stage-23] [0m[94mclient: $ redis-cli PSYNC ? -1[0m
[33m[stage-23] [0m[36mclient: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-23] [0m[36mclient: Received bytes: "+FULLRESYNC 0b56797c373f689dfb6b721843a55a238624f09f 0\r\n"[0m
[33m[stage-23] [0m[36mclient: Received RESP value: "FULLRESYNC 0b56797c373f689dfb6b721843a55a238624f09f 0"[0m
[33m[stage-23] [0m[92mReceived "FULLRESYNC 0b56797c373f689dfb6b721843a55a238624f09f 0"[0m
[33m[stage-23] [0m[36mReading RDB file...[0m
[33m[stage-23] [0m[36mclient: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xf8\x8a*f\xfa\bused-mem\xc20\x0e\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(0b56797c373f689dfb6b721843a55a238624f09f\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff4\x93\xfc\x10\xf7\xf5\xa3J"[0m
[33m[stage-23] [0m[92mReceived RDB file[0m
[33m[stage-23] [0m[92mTest passed.[0m
[33m[stage-23] [0m[36mTerminating program[0m
[33m[stage-23] [0m[36mProgram terminated successfully[0m

[33m[stage-24] [0m[94mRunning tests for Stage #24: repl-master-cmd-prop[0m
[33m[stage-24] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-24] [0m[94mreplica: $ redis-cli PING[0m
[33m[stage-24] [0m[36mreplica: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "+PONG\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: "PONG"[0m
[33m[stage-24] [0m[92mReceived "PONG"[0m
[33m[stage-24] [0m[94mreplica: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-24] [0m[36mreplica: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "+OK\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: "OK"[0m
[33m[stage-24] [0m[92mReceived "OK"[0m
[33m[stage-24] [0m[94mreplica: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-24] [0m[36mreplica: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "+OK\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: "OK"[0m
[33m[stage-24] [0m[92mReceived "OK"[0m
[33m[stage-24] [0m[94mreplica: $ redis-cli PSYNC ? -1[0m
[33m[stage-24] [0m[36mreplica: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "+FULLRESYNC c54246784080859481012229c8cf3cf426724a74 0\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: "FULLRESYNC c54246784080859481012229c8cf3cf426724a74 0"[0m
[33m[stage-24] [0m[92mReceived "FULLRESYNC c54246784080859481012229c8cf3cf426724a74 0"[0m
[33m[stage-24] [0m[36mReading RDB file...[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xf8\x8a*f\xfa\bused-mem\xc2@S\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(c54246784080859481012229c8cf3cf426724a74\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff<\xc0\x0e\xd97\x1fBB"[0m
[33m[stage-24] [0m[92mReceived RDB file[0m
[33m[stage-24] [0m[94mclient: $ redis-cli SET foo 123[0m
[33m[stage-24] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-24] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-24] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-24] [0m[92mReceived "OK"[0m
[33m[stage-24] [0m[94mclient: $ redis-cli SET bar 456[0m
[33m[stage-24] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-24] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-24] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-24] [0m[92mReceived "OK"[0m
[33m[stage-24] [0m[94mclient: $ redis-cli SET baz 789[0m
[33m[stage-24] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-24] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-24] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-24] [0m[92mReceived "OK"[0m
[33m[stage-24] [0m[92mSent 3 SET commands to master successfully.[0m
[33m[stage-24] [0m[94mreplica: Expecting SET foo 123 to be propagated[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: ["SELECT", "0"][0m
[33m[stage-24] [0m[36mreplica: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-24] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-24] [0m[94mreplica: Expecting SET bar 456 to be propagated[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: ["SET", "bar", "456"][0m
[33m[stage-24] [0m[92mReceived ["SET", "bar", "456"][0m
[33m[stage-24] [0m[94mreplica: Expecting SET baz 789 to be propagated[0m
[33m[stage-24] [0m[36mreplica: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-24] [0m[36mreplica: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-24] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-24] [0m[92mTest passed.[0m
[33m[stage-24] [0m[36mTerminating program[0m
[33m[stage-24] [0m[36mProgram terminated successfully[0m

[33m[stage-25] [0m[94mRunning tests for Stage #25: repl-multiple-replicas[0m
[33m[stage-25] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-25] [0m[36mCreating replica: 1[0m
[33m[stage-25] [0m[94mreplica-1: $ redis-cli PING[0m
[33m[stage-25] [0m[36mreplica-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: "PONG"[0m
[33m[stage-25] [0m[92mReceived "PONG"[0m
[33m[stage-25] [0m[94mreplica-1: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-25] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-1: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-25] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-1: $ redis-cli PSYNC ? -1[0m
[33m[stage-25] [0m[36mreplica-1: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "+FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[92mReceived "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[36mReading RDB file...[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xf9\x8a*f\xfa\bused-mem\u00a0S\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(7be67472ae8abe627b28553754af84ca1cbad865\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\x823<\xf2*\xa7\x94$"[0m
[33m[stage-25] [0m[92mReceived RDB file[0m
[33m[stage-25] [0m[36mCreating replica: 2[0m
[33m[stage-25] [0m[94mreplica-2: $ redis-cli PING[0m
[33m[stage-25] [0m[36mreplica-2: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "+PONG\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: "PONG"[0m
[33m[stage-25] [0m[92mReceived "PONG"[0m
[33m[stage-25] [0m[94mreplica-2: $ redis-cli REPLCONF listening-port 6381[0m
[33m[stage-25] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6381\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-2: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-25] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-2: $ redis-cli PSYNC ? -1[0m
[33m[stage-25] [0m[36mreplica-2: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "+FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[92mReceived "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[36mReading RDB file...[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xf9\x8a*f\xfa\bused-mem\xc2\x10;\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(7be67472ae8abe627b28553754af84ca1cbad865\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\ah\xb9\xb7\xb7a$\xfe"[0m
[33m[stage-25] [0m[92mReceived RDB file[0m
[33m[stage-25] [0m[36mCreating replica: 3[0m
[33m[stage-25] [0m[94mreplica-3: $ redis-cli PING[0m
[33m[stage-25] [0m[36mreplica-3: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "+PONG\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: "PONG"[0m
[33m[stage-25] [0m[92mReceived "PONG"[0m
[33m[stage-25] [0m[94mreplica-3: $ redis-cli REPLCONF listening-port 6382[0m
[33m[stage-25] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6382\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-3: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-25] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mreplica-3: $ redis-cli PSYNC ? -1[0m
[33m[stage-25] [0m[36mreplica-3: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "+FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[92mReceived "FULLRESYNC 7be67472ae8abe627b28553754af84ca1cbad865 0"[0m
[33m[stage-25] [0m[36mReading RDB file...[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xf9\x8a*f\xfa\bused-mem\xc2 J\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(7be67472ae8abe627b28553754af84ca1cbad865\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff#\xb5\x8bMT\xb2*/"[0m
[33m[stage-25] [0m[92mReceived RDB file[0m
[33m[stage-25] [0m[94mclient: $ redis-cli SET foo 123[0m
[33m[stage-25] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-25] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mclient: $ redis-cli SET bar 456[0m
[33m[stage-25] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-25] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mclient: $ redis-cli SET baz 789[0m
[33m[stage-25] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-25] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-25] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-25] [0m[92mReceived "OK"[0m
[33m[stage-25] [0m[94mTesting Replica: 1/3[0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: ["SELECT", "0"][0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-25] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: ["SET", "bar", "456"][0m
[33m[stage-25] [0m[92mReceived ["SET", "bar", "456"][0m
[33m[stage-25] [0m[36mreplica-1: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-25] [0m[36mreplica-1: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-25] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-25] [0m[94mTesting Replica: 2/3[0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: ["SELECT", "0"][0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-25] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: ["SET", "bar", "456"][0m
[33m[stage-25] [0m[92mReceived ["SET", "bar", "456"][0m
[33m[stage-25] [0m[36mreplica-2: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-25] [0m[36mreplica-2: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-25] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-25] [0m[94mTesting Replica: 3/3[0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: ["SELECT", "0"][0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-25] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: ["SET", "bar", "456"][0m
[33m[stage-25] [0m[92mReceived ["SET", "bar", "456"][0m
[33m[stage-25] [0m[36mreplica-3: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-25] [0m[36mreplica-3: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-25] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-25] [0m[92mTest passed.[0m
[33m[stage-25] [0m[36mTerminating program[0m
[33m[stage-25] [0m[36mProgram terminated successfully[0m

[33m[stage-26] [0m[94mRunning tests for Stage #26: repl-cmd-processing[0m
[33m[stage-26] [0m[94mMaster is running on port 6379[0m
[33m[stage-26] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-26] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-26] [0m[92mReceived ["PING"][0m
[33m[stage-26] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-26] [0m[92mReceived ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-26] [0m[94mmaster: Sent "OK"[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-26] [0m[92mReceived ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-26] [0m[94mmaster: Sent "OK"[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-26] [0m[36mmaster: Received RESP value: ["PSYNC", "?", "-1"][0m
[33m[stage-26] [0m[92mReceived ["PSYNC", "?", "-1"][0m
[33m[stage-26] [0m[94mmaster: Sent "FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0"[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "+FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0\r\n"[0m
[33m[stage-26] [0m[36mSending RDB file...[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "$88\r\nREDIS0011\xfa\tredis-ver\x057.2.0\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2m\b\xbce\xfa\bused-mem°\xc4\x10\x00\xfa\baof-base\xc0\x00\xff\xf0n;\xfe\xc0\xffZ\xa2"[0m
[33m[stage-26] [0m[92mSent RDB file.[0m
[33m[stage-26] [0m[94mmaster: $ redis-cli SET foo 123[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-26] [0m[94mmaster: $ redis-cli SET bar 456[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbar\r\n$3\r\n456\r\n"[0m
[33m[stage-26] [0m[94mmaster: $ redis-cli SET baz 789[0m
[33m[stage-26] [0m[36mmaster: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-26] [0m[94mGetting key foo[0m
[33m[stage-26] [0m[94mclient: $ redis-cli GET foo[0m
[33m[stage-26] [0m[36mclient: Sent bytes: "*2\r\n$3\r\nGET\r\n$3\r\nfoo\r\n"[0m
[33m[stage-26] [0m[36mclient: Received bytes: "$3\r\n123\r\n"[0m
[33m[stage-26] [0m[36mclient: Received RESP value: "123"[0m
[33m[stage-26] [0m[92mReceived "123"[0m
[33m[stage-26] [0m[94mGetting key bar[0m
[33m[stage-26] [0m[94mclient: $ redis-cli GET bar[0m
[33m[stage-26] [0m[36mclient: Sent bytes: "*2\r\n$3\r\nGET\r\n$3\r\nbar\r\n"[0m
[33m[stage-26] [0m[36mclient: Received bytes: "$3\r\n456\r\n"[0m
[33m[stage-26] [0m[36mclient: Received RESP value: "456"[0m
[33m[stage-26] [0m[92mReceived "456"[0m
[33m[stage-26] [0m[94mGetting key baz[0m
[33m[stage-26] [0m[94mclient: $ redis-cli GET baz[0m
[33m[stage-26] [0m[36mclient: Sent bytes: "*2\r\n$3\r\nGET\r\n$3\r\nbaz\r\n"[0m
[33m[stage-26] [0m[36mclient: Received bytes: "$3\r\n789\r\n"[0m
[33m[stage-26] [0m[36mclient: Received RESP value: "789"[0m
[33m[stage-26] [0m[92mReceived "789"[0m
[33m[stage-26] [0m[92mTest passed.[0m
[33m[stage-26] [0m[36mTerminating program[0m
[33m[stage-26] [0m[36mProgram terminated successfully[0m

[33m[stage-27] [0m[94mRunning tests for Stage #27: repl-replica-getack[0m
[33m[stage-27] [0m[94mMaster is running on port 6379[0m
[33m[stage-27] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-27] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-27] [0m[92mReceived ["PING"][0m
[33m[stage-27] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-27] [0m[92mReceived ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-27] [0m[94mmaster: Sent "OK"[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-27] [0m[92mReceived ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-27] [0m[94mmaster: Sent "OK"[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received RESP value: ["PSYNC", "?", "-1"][0m
[33m[stage-27] [0m[92mReceived ["PSYNC", "?", "-1"][0m
[33m[stage-27] [0m[94mmaster: Sent "FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0"[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "+FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0\r\n"[0m
[33m[stage-27] [0m[36mSending RDB file...[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "$88\r\nREDIS0011\xfa\tredis-ver\x057.2.0\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2m\b\xbce\xfa\bused-mem°\xc4\x10\x00\xfa\baof-base\xc0\x00\xff\xf0n;\xfe\xc0\xffZ\xa2"[0m
[33m[stage-27] [0m[92mSent RDB file.[0m
[33m[stage-27] [0m[94mmaster: $ redis-cli REPLCONF GETACK *[0m
[33m[stage-27] [0m[36mmaster: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$1\r\n0\r\n"[0m
[33m[stage-27] [0m[36mmaster: Received RESP value: ["REPLCONF", "ACK", "0"][0m
[33m[stage-27] [0m[92mReceived ["REPLCONF", "ACK", "0"][0m
[33m[stage-27] [0m[92mTest passed.[0m
[33m[stage-27] [0m[36mTerminating program[0m
[33m[stage-27] [0m[36mProgram terminated successfully[0m

[33m[stage-28] [0m[94mRunning tests for Stage #28: repl-replica-getack-nonzero[0m
[33m[stage-28] [0m[94mMaster is running on port 6379[0m
[33m[stage-28] [0m[94m$ ./spawn_redis_server.sh --port 6380 --replicaof localhost 6379[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["PING"][0m
[33m[stage-28] [0m[92mReceived ["PING"][0m
[33m[stage-28] [0m[94mmaster: Sent "PONG"[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "+PONG\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-28] [0m[92mReceived ["REPLCONF", "listening-port", "6380"][0m
[33m[stage-28] [0m[94mmaster: Sent "OK"[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*5\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$3\r\neof\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-28] [0m[92mReceived ["REPLCONF", "capa", "eof", "capa", "psync2"][0m
[33m[stage-28] [0m[94mmaster: Sent "OK"[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "+OK\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["PSYNC", "?", "-1"][0m
[33m[stage-28] [0m[92mReceived ["PSYNC", "?", "-1"][0m
[33m[stage-28] [0m[94mmaster: Sent "FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0"[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "+FULLRESYNC 75cd7bc10c49047e0d163660f3b90625b1af31dc 0\r\n"[0m
[33m[stage-28] [0m[36mSending RDB file...[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "$88\r\nREDIS0011\xfa\tredis-ver\x057.2.0\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2m\b\xbce\xfa\bused-mem°\xc4\x10\x00\xfa\baof-base\xc0\x00\xff\xf0n;\xfe\xc0\xffZ\xa2"[0m
[33m[stage-28] [0m[92mSent RDB file.[0m
[33m[stage-28] [0m[94mmaster: $ redis-cli REPLCONF GETACK *[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$1\r\n0\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["REPLCONF", "ACK", "0"][0m
[33m[stage-28] [0m[92mReceived ["REPLCONF", "ACK", "0"][0m
[33m[stage-28] [0m[94mmaster: $ redis-cli PING[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-28] [0m[94mmaster: $ redis-cli REPLCONF GETACK *[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$2\r\n51\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["REPLCONF", "ACK", "51"][0m
[33m[stage-28] [0m[92mReceived ["REPLCONF", "ACK", "51"][0m
[33m[stage-28] [0m[94mmaster: $ redis-cli SET banana orange[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*3\r\n$3\r\nSET\r\n$6\r\nbanana\r\n$6\r\norange\r\n"[0m
[33m[stage-28] [0m[94mmaster: $ redis-cli SET banana grape[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*3\r\n$3\r\nSET\r\n$6\r\nbanana\r\n$5\r\ngrape\r\n"[0m
[33m[stage-28] [0m[94mmaster: $ redis-cli REPLCONF GETACK *[0m
[33m[stage-28] [0m[36mmaster: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$3\r\n161\r\n"[0m
[33m[stage-28] [0m[36mmaster: Received RESP value: ["REPLCONF", "ACK", "161"][0m
[33m[stage-28] [0m[92mReceived ["REPLCONF", "ACK", "161"][0m
[33m[stage-28] [0m[92mTest passed.[0m
[33m[stage-28] [0m[36mTerminating program[0m
[33m[stage-28] [0m[36mProgram terminated successfully[0m

[33m[stage-29] [0m[94mRunning tests for Stage #29: repl-wait-zero-replicas[0m
[33m[stage-29] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-29] [0m[94mclient: $ redis-cli WAIT 0 60000[0m
[33m[stage-29] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n0\r\n$5\r\n60000\r\n"[0m
[33m[stage-29] [0m[36mclient: Received bytes: ":0\r\n"[0m
[33m[stage-29] [0m[36mclient: Received RESP value: 0[0m
[33m[stage-29] [0m[92mReceived 0[0m
[33m[stage-29] [0m[92mTest passed.[0m
[33m[stage-29] [0m[36mTerminating program[0m
[33m[stage-29] [0m[36mProgram terminated successfully[0m

[33m[stage-30] [0m[94mRunning tests for Stage #30: repl-wait-zero-offset[0m
[33m[stage-30] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-30] [0m[94mProceeding to create 4 replicas.[0m
[33m[stage-30] [0m[36mCreating replica: 1[0m
[33m[stage-30] [0m[94mreplica-1: $ redis-cli PING[0m
[33m[stage-30] [0m[36mreplica-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received RESP value: "PONG"[0m
[33m[stage-30] [0m[92mReceived "PONG"[0m
[33m[stage-30] [0m[94mreplica-1: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-30] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-1: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-30] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-1: $ redis-cli PSYNC ? -1[0m
[33m[stage-30] [0m[36mreplica-1: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received bytes: "+FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0\r\n"[0m
[33m[stage-30] [0m[36mreplica-1: Received RESP value: "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[92mReceived "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[36mReading RDB file...[0m
[33m[stage-30] [0m[36mreplica-1: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfa\x8a*f\xfa\bused-mem\u0090\x0e\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(ff45079dcc21940b5afb22c3d72937d3bb0f7a38\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\xb1\x91E\u0380\x01\xa6\xb8"[0m
[33m[stage-30] [0m[92mReceived RDB file[0m
[33m[stage-30] [0m[36mCreating replica: 2[0m
[33m[stage-30] [0m[94mreplica-2: $ redis-cli PING[0m
[33m[stage-30] [0m[36mreplica-2: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received bytes: "+PONG\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received RESP value: "PONG"[0m
[33m[stage-30] [0m[92mReceived "PONG"[0m
[33m[stage-30] [0m[94mreplica-2: $ redis-cli REPLCONF listening-port 6381[0m
[33m[stage-30] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6381\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-2: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-30] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-2: $ redis-cli PSYNC ? -1[0m
[33m[stage-30] [0m[36mreplica-2: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received bytes: "+FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0\r\n"[0m
[33m[stage-30] [0m[36mreplica-2: Received RESP value: "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[92mReceived "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[36mReading RDB file...[0m
[33m[stage-30] [0m[36mreplica-2: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfa\x8a*f\xfa\bused-mem\xc2 \xf6\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(ff45079dcc21940b5afb22c3d72937d3bb0f7a38\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\u0383\xf8\x19 \x96\x8b\x9b"[0m
[33m[stage-30] [0m[92mReceived RDB file[0m
[33m[stage-30] [0m[36mCreating replica: 3[0m
[33m[stage-30] [0m[94mreplica-3: $ redis-cli PING[0m
[33m[stage-30] [0m[36mreplica-3: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received bytes: "+PONG\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received RESP value: "PONG"[0m
[33m[stage-30] [0m[92mReceived "PONG"[0m
[33m[stage-30] [0m[94mreplica-3: $ redis-cli REPLCONF listening-port 6382[0m
[33m[stage-30] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6382\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-3: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-30] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-3: $ redis-cli PSYNC ? -1[0m
[33m[stage-30] [0m[36mreplica-3: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received bytes: "+FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0\r\n"[0m
[33m[stage-30] [0m[36mreplica-3: Received RESP value: "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[92mReceived "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[36mReading RDB file...[0m
[33m[stage-30] [0m[36mreplica-3: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfa\x8a*f\xfa\bused-mem\xc2 A\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(ff45079dcc21940b5afb22c3d72937d3bb0f7a38\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\xf7k\x01c\x83\xe6E\x00"[0m
[33m[stage-30] [0m[92mReceived RDB file[0m
[33m[stage-30] [0m[36mCreating replica: 4[0m
[33m[stage-30] [0m[94mreplica-4: $ redis-cli PING[0m
[33m[stage-30] [0m[36mreplica-4: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received bytes: "+PONG\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received RESP value: "PONG"[0m
[33m[stage-30] [0m[92mReceived "PONG"[0m
[33m[stage-30] [0m[94mreplica-4: $ redis-cli REPLCONF listening-port 6383[0m
[33m[stage-30] [0m[36mreplica-4: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6383\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-4: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-30] [0m[36mreplica-4: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received bytes: "+OK\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received RESP value: "OK"[0m
[33m[stage-30] [0m[92mReceived "OK"[0m
[33m[stage-30] [0m[94mreplica-4: $ redis-cli PSYNC ? -1[0m
[33m[stage-30] [0m[36mreplica-4: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received bytes: "+FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0\r\n"[0m
[33m[stage-30] [0m[36mreplica-4: Received RESP value: "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[92mReceived "FULLRESYNC ff45079dcc21940b5afb22c3d72937d3bb0f7a38 0"[0m
[33m[stage-30] [0m[36mReading RDB file...[0m
[33m[stage-30] [0m[36mreplica-4: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfa\x8a*f\xfa\bused-mem\xc20\x8c\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(ff45079dcc21940b5afb22c3d72937d3bb0f7a38\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff[\x9c\xb5\x1a\x18{\xe3\\"[0m
[33m[stage-30] [0m[92mReceived RDB file[0m
[33m[stage-30] [0m[94mclient: $ redis-cli WAIT 3 500[0m
[33m[stage-30] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n3\r\n$3\r\n500\r\n"[0m
[33m[stage-30] [0m[36mclient: Received bytes: ":4\r\n"[0m
[33m[stage-30] [0m[36mclient: Received RESP value: 4[0m
[33m[stage-30] [0m[92mReceived 4[0m
[33m[stage-30] [0m[94mclient: $ redis-cli WAIT 4 500[0m
[33m[stage-30] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n4\r\n$3\r\n500\r\n"[0m
[33m[stage-30] [0m[36mclient: Received bytes: ":4\r\n"[0m
[33m[stage-30] [0m[36mclient: Received RESP value: 4[0m
[33m[stage-30] [0m[92mReceived 4[0m
[33m[stage-30] [0m[94mclient: $ redis-cli WAIT 5 500[0m
[33m[stage-30] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n5\r\n$3\r\n500\r\n"[0m
[33m[stage-30] [0m[36mclient: Received bytes: ":4\r\n"[0m
[33m[stage-30] [0m[36mclient: Received RESP value: 4[0m
[33m[stage-30] [0m[92mReceived 4[0m
[33m[stage-30] [0m[94mclient: $ redis-cli WAIT 6 500[0m
[33m[stage-30] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n6\r\n$3\r\n500\r\n"[0m
[33m[stage-30] [0m[36mclient: Received bytes: ":4\r\n"[0m
[33m[stage-30] [0m[36mclient: Received RESP value: 4[0m
[33m[stage-30] [0m[92mReceived 4[0m
[33m[stage-30] [0m[92mTest passed.[0m
[33m[stage-30] [0m[36mTerminating program[0m
[33m[stage-30] [0m[36mProgram terminated successfully[0m

[33m[stage-31] [0m[94mRunning tests for Stage #31: repl-wait[0m
[33m[stage-31] [0m[94m$ ./spawn_redis_server.sh --port 6379[0m
[33m[stage-31] [0m[94mProceeding to create 4 replicas.[0m
[33m[stage-31] [0m[36mCreating replica: 1[0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli PING[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "+PONG\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: "PONG"[0m
[33m[stage-31] [0m[92mReceived "PONG"[0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli REPLCONF listening-port 6380[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6380\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli PSYNC ? -1[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "+FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[92mReceived "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[36mReading RDB file...[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfb\x8a*f\xfa\bused-mem\xc20\x0e\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(d3a1643fd01efd83215ad12f19cdd718701a0fc3\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\xd3\xd4+\xeb1\"\xca\xd1"[0m
[33m[stage-31] [0m[92mReceived RDB file[0m
[33m[stage-31] [0m[36mCreating replica: 2[0m
[33m[stage-31] [0m[94mreplica-2: $ redis-cli PING[0m
[33m[stage-31] [0m[36mreplica-2: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "+PONG\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: "PONG"[0m
[33m[stage-31] [0m[92mReceived "PONG"[0m
[33m[stage-31] [0m[94mreplica-2: $ redis-cli REPLCONF listening-port 6381[0m
[33m[stage-31] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6381\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-2: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-31] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-2: $ redis-cli PSYNC ? -1[0m
[33m[stage-31] [0m[36mreplica-2: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "+FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[92mReceived "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[36mReading RDB file...[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfb\x8a*f\xfa\bused-mem\xc2\xc0\xf5\x12\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(d3a1643fd01efd83215ad12f19cdd718701a0fc3\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xffz\xc1\xbc\xecɏ\x04d"[0m
[33m[stage-31] [0m[92mReceived RDB file[0m
[33m[stage-31] [0m[36mCreating replica: 3[0m
[33m[stage-31] [0m[94mreplica-3: $ redis-cli PING[0m
[33m[stage-31] [0m[36mreplica-3: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "+PONG\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: "PONG"[0m
[33m[stage-31] [0m[92mReceived "PONG"[0m
[33m[stage-31] [0m[94mreplica-3: $ redis-cli REPLCONF listening-port 6382[0m
[33m[stage-31] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6382\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-3: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-31] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-3: $ redis-cli PSYNC ? -1[0m
[33m[stage-31] [0m[36mreplica-3: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "+FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[92mReceived "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[36mReading RDB file...[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfb\x8a*f\xfa\bused-mem\xc2\xc0@\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(d3a1643fd01efd83215ad12f19cdd718701a0fc3\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xffB\xe6$\xa4 @\x93J"[0m
[33m[stage-31] [0m[92mReceived RDB file[0m
[33m[stage-31] [0m[36mCreating replica: 4[0m
[33m[stage-31] [0m[94mreplica-4: $ redis-cli PING[0m
[33m[stage-31] [0m[36mreplica-4: Sent bytes: "*1\r\n$4\r\nPING\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "+PONG\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: "PONG"[0m
[33m[stage-31] [0m[92mReceived "PONG"[0m
[33m[stage-31] [0m[94mreplica-4: $ redis-cli REPLCONF listening-port 6383[0m
[33m[stage-31] [0m[36mreplica-4: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$14\r\nlistening-port\r\n$4\r\n6383\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-4: $ redis-cli REPLCONF capa psync2[0m
[33m[stage-31] [0m[36mreplica-4: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$4\r\ncapa\r\n$6\r\npsync2\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mreplica-4: $ redis-cli PSYNC ? -1[0m
[33m[stage-31] [0m[36mreplica-4: Sent bytes: "*3\r\n$5\r\nPSYNC\r\n$1\r\n?\r\n$2\r\n-1\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "+FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[92mReceived "FULLRESYNC d3a1643fd01efd83215ad12f19cdd718701a0fc3 0"[0m
[33m[stage-31] [0m[36mReading RDB file...[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "$171\r\nREDIS0011\xfa\tredis-ver\x057.2.4\xfa\nredis-bits\xc0@\xfa\x05ctime\xc2\xfb\x8a*f\xfa\bused-mem\xc2Ћ\x13\x00\xfa\x0erepl-stream-db\xc0\x00\xfa\arepl-id(d3a1643fd01efd83215ad12f19cdd718701a0fc3\xfa\vrepl-offset\xc0\x00\xfa\baof-base\xc0\x00\xff\x86ӥ\xd36:\x86\xe2"[0m
[33m[stage-31] [0m[92mReceived RDB file[0m
[33m[stage-31] [0m[94mclient: $ redis-cli SET foo 123[0m
[33m[stage-31] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-31] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mclient: $ redis-cli WAIT 1 500[0m
[33m[stage-31] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n1\r\n$3\r\n500\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 1[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: ["SELECT", "0"][0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-31] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli REPLCONF ACK 54[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$2\r\n54\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 2[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: ["SELECT", "0"][0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-31] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mTesting Replica : 3[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: ["SELECT", "0"][0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-31] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mTesting Replica : 4[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "*2\r\n$6\r\nSELECT\r\n$1\r\n0\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: ["SELECT", "0"][0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nfoo\r\n$3\r\n123\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: ["SET", "foo", "123"][0m
[33m[stage-31] [0m[92mReceived ["SET", "foo", "123"][0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[36mclient: Received bytes: ":1\r\n"[0m
[33m[stage-31] [0m[36mclient: Received RESP value: 1[0m
[33m[stage-31] [0m[92mPassed first WAIT test.[0m
[33m[stage-31] [0m[94mclient: $ redis-cli SET baz 789[0m
[33m[stage-31] [0m[36mclient: Sent bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-31] [0m[36mclient: Received bytes: "+OK\r\n"[0m
[33m[stage-31] [0m[36mclient: Received RESP value: "OK"[0m
[33m[stage-31] [0m[92mReceived "OK"[0m
[33m[stage-31] [0m[94mclient: $ redis-cli WAIT 4 2000[0m
[33m[stage-31] [0m[36mclient: Sent bytes: "*3\r\n$4\r\nWAIT\r\n$1\r\n4\r\n$4\r\n2000\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 1[0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-31] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-31] [0m[36mreplica-1: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-1: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mreplica-1: $ redis-cli REPLCONF ACK 122[0m
[33m[stage-31] [0m[36mreplica-1: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$3\r\n122\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 2[0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-31] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-31] [0m[36mreplica-2: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-2: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mreplica-2: $ redis-cli REPLCONF ACK 122[0m
[33m[stage-31] [0m[36mreplica-2: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$3\r\n122\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 3[0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-31] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-31] [0m[36mreplica-3: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-3: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[94mreplica-3: $ redis-cli REPLCONF ACK 122[0m
[33m[stage-31] [0m[36mreplica-3: Sent bytes: "*3\r\n$8\r\nREPLCONF\r\n$3\r\nACK\r\n$3\r\n122\r\n"[0m
[33m[stage-31] [0m[94mTesting Replica : 4[0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "*3\r\n$3\r\nSET\r\n$3\r\nbaz\r\n$3\r\n789\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: ["SET", "baz", "789"][0m
[33m[stage-31] [0m[92mReceived ["SET", "baz", "789"][0m
[33m[stage-31] [0m[36mreplica-4: Received bytes: "*3\r\n$8\r\nREPLCONF\r\n$6\r\nGETACK\r\n$1\r\n*\r\n"[0m
[33m[stage-31] [0m[36mreplica-4: Received RESP value: ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[92mReceived ["REPLCONF", "GETACK", "*"][0m
[33m[stage-31] [0m[36mclient: Received bytes: ":3\r\n"[0m
[33m[stage-31] [0m[36mclient: Received RESP value: 3[0m
[33m[stage-31] [0m[94mWAIT command returned after 2100 ms[0m
[33m[stage-31] [0m[92mTest passed.[0m
[33m[stage-31] [0m[36mTerminating program[0m
[33m[stage-31] [0m[36mProgram terminated successfully[0m

[33m[stage-32] [0m[94mRunning tests for Stage #32: streams-type[0m
[33m[stage-32] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-32] [0m[94m$ redis-cli set "pear" "raspberry"[0m
[33m[stage-32] [0m[92mReceived response: ""OK""[0m
[33m[stage-32] [0m[94m$ redis-cli type "pear"[0m
[33m[stage-32] [0m[92mType of "pear" is "string"[0m
[33m[stage-32] [0m[94m$ redis-cli type "missing_key_raspberry"[0m
[33m[stage-32] [0m[92mType of missing_key_"raspberry" is "none"[0m
[33m[stage-32] [0m[92mTest passed.[0m
[33m[stage-32] [0m[36mTerminating program[0m
[33m[stage-32] [0m[36mProgram terminated successfully[0m

[33m[stage-33] [0m[94mRunning tests for Stage #33: streams-xadd[0m
[33m[stage-33] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-33] [0m[94m$ redis-cli xadd "raspberry" "0-1" "foo bar"[0m
[33m[stage-33] [0m[92mReceived response: ""0-1""[0m
[33m[stage-33] [0m[94m$ redis-cli type "raspberry"[0m
[33m[stage-33] [0m[92mType of "raspberry" is "stream"[0m
[33m[stage-33] [0m[92mTest passed.[0m
[33m[stage-33] [0m[36mTerminating program[0m
[33m[stage-33] [0m[36mProgram terminated successfully[0m

[33m[stage-34] [0m[94mRunning tests for Stage #34: streams-xadd-validate-id[0m
[33m[stage-34] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-34] [0m[94m$ redis-cli xadd "grape" "1-1" "foo bar"[0m
[33m[stage-34] [0m[92mReceived response: ""1-1""[0m
[33m[stage-34] [0m[94m$ redis-cli xadd "grape" "1-2" "bar baz"[0m
[33m[stage-34] [0m[92mReceived response: ""1-2""[0m
[33m[stage-34] [0m[94m$ redis-cli xadd "grape" "1-2" "baz foo"[0m
[33m[stage-34] [0m[92mReceived error: ""ERR The ID specified in XADD is equal or smaller than the target stream top item""[0m
[33m[stage-34] [0m[94m$ redis-cli xadd "grape" "0-3" "baz foo"[0m
[33m[stage-34] [0m[92mReceived error: ""ERR The ID specified in XADD is equal or smaller than the target stream top item""[0m
[33m[stage-34] [0m[94m$ redis-cli xadd "grape" "0-0" "baz foo"[0m
[33m[stage-34] [0m[92mReceived error: ""ERR The ID specified in XADD must be greater than 0-0""[0m
[33m[stage-34] [0m[92mTest passed.[0m
[33m[stage-34] [0m[36mTerminating program[0m
[33m[stage-34] [0m[36mProgram terminated successfully[0m

[33m[stage-35] [0m[94mRunning tests for Stage #35: streams-xadd-partial-autoid[0m
[33m[stage-35] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-35] [0m[94m$ redis-cli xadd "pear" "0-*" "foo bar"[0m
[33m[stage-35] [0m[92mReceived response: ""0-1""[0m
[33m[stage-35] [0m[94m$ redis-cli xadd "pear" "1-*" "foo bar"[0m
[33m[stage-35] [0m[92mReceived response: ""1-0""[0m
[33m[stage-35] [0m[94m$ redis-cli xadd "pear" "1-*" "bar baz"[0m
[33m[stage-35] [0m[92mReceived response: ""1-1""[0m
[33m[stage-35] [0m[92mTest passed.[0m
[33m[stage-35] [0m[36mTerminating program[0m
[33m[stage-35] [0m[36mProgram terminated successfully[0m

[33m[stage-36] [0m[94mRunning tests for Stage #36: streams-xadd-full-autoid[0m
[33m[stage-36] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-36] [0m[94m$ redis-cli xadd "pear" * foo bar[0m
[33m[stage-36] [0m[94mReceived response: ""1714064126904-0""[0m
[33m[stage-36] [0m[92mThe first part of the ID is a valid unix milliseconds timestamp[0m
[33m[stage-36] [0m[92mThe second part of the ID is a valid sequence number[0m
[33m[stage-36] [0m[92mTest passed.[0m
[33m[stage-36] [0m[36mTerminating program[0m
[33m[stage-36] [0m[36mProgram terminated successfully[0m

[33m[stage-37] [0m[94mRunning tests for Stage #37: streams-xrange[0m
[33m[stage-37] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-37] [0m[94m$ redis-cli xadd "mango" "0-1" "foo bar"[0m
[33m[stage-37] [0m[92mReceived response: ""0-1""[0m
[33m[stage-37] [0m[94m$ redis-cli xadd "mango" "0-2" "foo bar"[0m
[33m[stage-37] [0m[92mReceived response: ""0-2""[0m
[33m[stage-37] [0m[94m$ redis-cli xadd "mango" "0-3" "foo bar"[0m
[33m[stage-37] [0m[92mReceived response: ""0-3""[0m
[33m[stage-37] [0m[94m$ redis-cli xrange "mango" 0-2 "0-3"[0m
[33m[stage-37] [0m[92mReceived response: "[[0m
[33m[stage-37] [0m[92m  {[0m
[33m[stage-37] [0m[92m    "ID": "0-2",[0m
[33m[stage-37] [0m[92m    "Values": {[0m
[33m[stage-37] [0m[92m      "foo": "bar"[0m
[33m[stage-37] [0m[92m    }[0m
[33m[stage-37] [0m[92m  },[0m
[33m[stage-37] [0m[92m  {[0m
[33m[stage-37] [0m[92m    "ID": "0-3",[0m
[33m[stage-37] [0m[92m    "Values": {[0m
[33m[stage-37] [0m[92m      "foo": "bar"[0m
[33m[stage-37] [0m[92m    }[0m
[33m[stage-37] [0m[92m  }[0m
[33m[stage-37] [0m[92m]"[0m
[33m[stage-37] [0m[92mTest passed.[0m
[33m[stage-37] [0m[36mTerminating program[0m
[33m[stage-37] [0m[36mProgram terminated successfully[0m

[33m[stage-38] [0m[94mRunning tests for Stage #38: streams-xrange-min-id[0m
[33m[stage-38] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-38] [0m[94m$ redis-cli xadd "mango" "0-1" "foo bar"[0m
[33m[stage-38] [0m[92mReceived response: ""0-1""[0m
[33m[stage-38] [0m[94m$ redis-cli xadd "mango" "0-2" "foo bar"[0m
[33m[stage-38] [0m[92mReceived response: ""0-2""[0m
[33m[stage-38] [0m[94m$ redis-cli xadd "mango" "0-3" "foo bar"[0m
[33m[stage-38] [0m[92mReceived response: ""0-3""[0m
[33m[stage-38] [0m[94m$ redis-cli xrange "mango" - "0-2"[0m
[33m[stage-38] [0m[92mReceived response: "[[0m
[33m[stage-38] [0m[92m  {[0m
[33m[stage-38] [0m[92m    "ID": "0-1",[0m
[33m[stage-38] [0m[92m    "Values": {[0m
[33m[stage-38] [0m[92m      "foo": "bar"[0m
[33m[stage-38] [0m[92m    }[0m
[33m[stage-38] [0m[92m  },[0m
[33m[stage-38] [0m[92m  {[0m
[33m[stage-38] [0m[92m    "ID": "0-2",[0m
[33m[stage-38] [0m[92m    "Values": {[0m
[33m[stage-38] [0m[92m      "foo": "bar"[0m
[33m[stage-38] [0m[92m    }[0m
[33m[stage-38] [0m[92m  }[0m
[33m[stage-38] [0m[92m]"[0m
[33m[stage-38] [0m[92mTest passed.[0m
[33m[stage-38] [0m[36mTerminating program[0m
[33m[stage-38] [0m[36mProgram terminated successfully[0m

[33m[stage-39] [0m[94mRunning tests for Stage #39: streams-xrange-max-id[0m
[33m[stage-39] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-39] [0m[94m$ redis-cli xadd "pineapple" "0-1" "foo bar"[0m
[33m[stage-39] [0m[92mReceived response: ""0-1""[0m
[33m[stage-39] [0m[94m$ redis-cli xadd "pineapple" "0-2" "foo bar"[0m
[33m[stage-39] [0m[92mReceived response: ""0-2""[0m
[33m[stage-39] [0m[94m$ redis-cli xadd "pineapple" "0-3" "foo bar"[0m
[33m[stage-39] [0m[92mReceived response: ""0-3""[0m
[33m[stage-39] [0m[94m$ redis-cli xrange "pineapple" 0-2 +[0m
[33m[stage-39] [0m[92mReceived response: "[[0m
[33m[stage-39] [0m[92m  {[0m
[33m[stage-39] [0m[92m    "ID": "0-2",[0m
[33m[stage-39] [0m[92m    "Values": {[0m
[33m[stage-39] [0m[92m      "foo": "bar"[0m
[33m[stage-39] [0m[92m    }[0m
[33m[stage-39] [0m[92m  },[0m
[33m[stage-39] [0m[92m  {[0m
[33m[stage-39] [0m[92m    "ID": "0-3",[0m
[33m[stage-39] [0m[92m    "Values": {[0m
[33m[stage-39] [0m[92m      "foo": "bar"[0m
[33m[stage-39] [0m[92m    }[0m
[33m[stage-39] [0m[92m  }[0m
[33m[stage-39] [0m[92m]"[0m
[33m[stage-39] [0m[92mTest passed.[0m
[33m[stage-39] [0m[36mTerminating program[0m
[33m[stage-39] [0m[36mProgram terminated successfully[0m

[33m[stage-40] [0m[94mRunning tests for Stage #40: streams-xread[0m
[33m[stage-40] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-40] [0m[94m$ redis-cli xadd "raspberry" "0-1" "temperature 4"[0m
[33m[stage-40] [0m[92mReceived response: ""0-1""[0m
[33m[stage-40] [0m[94m$ redis-cli xread streams "raspberry 0-0"[0m
[33m[stage-40] [0m[92mReceived response: "[[0m
[33m[stage-40] [0m[92m  {[0m
[33m[stage-40] [0m[92m    "Stream": "raspberry",[0m
[33m[stage-40] [0m[92m    "Messages": [[0m
[33m[stage-40] [0m[92m      {[0m
[33m[stage-40] [0m[92m        "ID": "0-1",[0m
[33m[stage-40] [0m[92m        "Values": {[0m
[33m[stage-40] [0m[92m          "temperature": "4"[0m
[33m[stage-40] [0m[92m        }[0m
[33m[stage-40] [0m[92m      }[0m
[33m[stage-40] [0m[92m    ][0m
[33m[stage-40] [0m[92m  }[0m
[33m[stage-40] [0m[92m]"[0m
[33m[stage-40] [0m[92mTest passed.[0m
[33m[stage-40] [0m[36mTerminating program[0m
[33m[stage-40] [0m[36mProgram terminated successfully[0m

[33m[stage-41] [0m[94mRunning tests for Stage #41: streams-xread-multiple[0m
[33m[stage-41] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-41] [0m[94m$ redis-cli xadd "raspberry" "0-1" "temperature 44"[0m
[33m[stage-41] [0m[92mReceived response: ""0-1""[0m
[33m[stage-41] [0m[94m$ redis-cli xadd "blueberry" "0-2" "humidity 20"[0m
[33m[stage-41] [0m[92mReceived response: ""0-2""[0m
[33m[stage-41] [0m[94m$ redis-cli xread streams "raspberry blueberry 0-0 0-1"[0m
[33m[stage-41] [0m[92mReceived response: "[[0m
[33m[stage-41] [0m[92m  {[0m
[33m[stage-41] [0m[92m    "Stream": "raspberry",[0m
[33m[stage-41] [0m[92m    "Messages": [[0m
[33m[stage-41] [0m[92m      {[0m
[33m[stage-41] [0m[92m        "ID": "0-1",[0m
[33m[stage-41] [0m[92m        "Values": {[0m
[33m[stage-41] [0m[92m          "temperature": "44"[0m
[33m[stage-41] [0m[92m        }[0m
[33m[stage-41] [0m[92m      }[0m
[33m[stage-41] [0m[92m    ][0m
[33m[stage-41] [0m[92m  },[0m
[33m[stage-41] [0m[92m  {[0m
[33m[stage-41] [0m[92m    "Stream": "blueberry",[0m
[33m[stage-41] [0m[92m    "Messages": [[0m
[33m[stage-41] [0m[92m      {[0m
[33m[stage-41] [0m[92m        "ID": "0-2",[0m
[33m[stage-41] [0m[92m        "Values": {[0m
[33m[stage-41] [0m[92m          "humidity": "20"[0m
[33m[stage-41] [0m[92m        }[0m
[33m[stage-41] [0m[92m      }[0m
[33m[stage-41] [0m[92m    ][0m
[33m[stage-41] [0m[92m  }[0m
[33m[stage-41] [0m[92m]"[0m
[33m[stage-41] [0m[92mTest passed.[0m
[33m[stage-41] [0m[36mTerminating program[0m
[33m[stage-41] [0m[36mProgram terminated successfully[0m

[33m[stage-42] [0m[94mRunning tests for Stage #42: streams-xread-block[0m
[33m[stage-42] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-42] [0m[94m$ redis-cli xadd "grape" "0-1" "temperature 46"[0m
[33m[stage-42] [0m[92mReceived response: ""0-1""[0m
[33m[stage-42] [0m[94m$ redis-cli xread block 'Ϩ' streams "grape 0-1"[0m
[33m[stage-42] [0m[94m$ redis-cli xadd "grape" "0-2" "temperature 46"[0m
[33m[stage-42] [0m[92mReceived response: ""0-2""[0m
[33m[stage-42] [0m[92mReceived response: "[[0m
[33m[stage-42] [0m[92m  {[0m
[33m[stage-42] [0m[92m    "Stream": "grape",[0m
[33m[stage-42] [0m[92m    "Messages": [[0m
[33m[stage-42] [0m[92m      {[0m
[33m[stage-42] [0m[92m        "ID": "0-2",[0m
[33m[stage-42] [0m[92m        "Values": {[0m
[33m[stage-42] [0m[92m          "temperature": "46"[0m
[33m[stage-42] [0m[92m        }[0m
[33m[stage-42] [0m[92m      }[0m
[33m[stage-42] [0m[92m    ][0m
[33m[stage-42] [0m[92m  }[0m
[33m[stage-42] [0m[92m]"[0m
[33m[stage-42] [0m[94m$ redis-cli xread block 'Ϩ' streams "grape 0-2"[0m
[33m[stage-42] [0m[92mReceived nil response[0m
[33m[stage-42] [0m[92mTest passed.[0m
[33m[stage-42] [0m[36mTerminating program[0m
[33m[stage-42] [0m[36mProgram terminated successfully[0m

[33m[stage-43] [0m[94mRunning tests for Stage #43: streams-xread-block-no-timeout[0m
[33m[stage-43] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-43] [0m[94m$ redis-cli xadd "mango" "0-1" "temperature 14"[0m
[33m[stage-43] [0m[92mReceived response: ""0-1""[0m
[33m[stage-43] [0m[94m$ redis-cli xread block '\x00' streams "mango 0-1"[0m
[33m[stage-43] [0m[94m$ redis-cli xadd "mango" "0-2" "temperature 14"[0m
[33m[stage-43] [0m[92mReceived response: ""0-2""[0m
[33m[stage-43] [0m[92mReceived response: "[[0m
[33m[stage-43] [0m[92m  {[0m
[33m[stage-43] [0m[92m    "Stream": "mango",[0m
[33m[stage-43] [0m[92m    "Messages": [[0m
[33m[stage-43] [0m[92m      {[0m
[33m[stage-43] [0m[92m        "ID": "0-2",[0m
[33m[stage-43] [0m[92m        "Values": {[0m
[33m[stage-43] [0m[92m          "temperature": "14"[0m
[33m[stage-43] [0m[92m        }[0m
[33m[stage-43] [0m[92m      }[0m
[33m[stage-43] [0m[92m    ][0m
[33m[stage-43] [0m[92m  }[0m
[33m[stage-43] [0m[92m]"[0m
[33m[stage-43] [0m[92mTest passed.[0m
[33m[stage-43] [0m[36mTerminating program[0m
[33m[stage-43] [0m[36mProgram terminated successfully[0m

[33m[stage-44] [0m[94mRunning tests for Stage #44: streams-xread-block-max-id[0m
[33m[stage-44] [0m[94m$ ./spawn_redis_server.sh[0m
[33m[stage-44] [0m[94m$ redis-cli xadd "pear" "0-1" "temperature 94"[0m
[33m[stage-44] [0m[92mReceived response: ""0-1""[0m
[33m[stage-44] [0m[94m$ redis-cli xread block '\x00' streams "pear 0-1"[0m
[33m[stage-44] [0m[94m$ redis-cli xadd "pear" "0-2" "temperature 94"[0m
[33m[stage-44] [0m[92mReceived response: ""0-2""[0m
[33m[stage-44] [0m[92mReceived response: "[[0m
[33m[stage-44] [0m[92m  {[0m
[33m[stage-44] [0m[92m    "Stream": "pear",[0m
[33m[stage-44] [0m[92m    "Messages": [[0m
[33m[stage-44] [0m[92m      {[0m
[33m[stage-44] [0m[92m        "ID": "0-2",[0m
[33m[stage-44] [0m[92m        "Values": {[0m
[33m[stage-44] [0m[92m          "temperature": "94"[0m
[33m[stage-44] [0m[92m        }[0m
[33m[stage-44] [0m[92m      }[0m
[33m[stage-44] [0m[92m    ][0m
[33m[stage-44] [0m[92m  }[0m
[33m[stage-44] [0m[92m]"[0m
[33m[stage-44] [0m[92mTest passed.[0m
[33m[stage-44] [0m[36mTerminating program[0m
[33m[stage-44] [0m[36mProgram terminated successfully[0m
